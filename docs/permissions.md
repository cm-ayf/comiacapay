# 権限について

[戻る](index.md)

Comiacapayは，Discordサーバーを使って権限を管理します．
イベントや商品の**設定はDiscordサーバーと紐づいており，そのサーバーにおける権限を持った人だけが閲覧・設定できます**．

例えば，DiscordサーバーA~Cがあり，あなたはAで管理者であり，Bで閲覧権限を持っており，Cには参加していないとします．
このとき，

- Aではイベントや商品の設定ができ，またAに関する権限設定ができます
- Bではイベントや商品の設定を閲覧することができます
- Cについては何もわからず，また何もできません

というように，Discordサーバーにおける権限によってComiacapayの権限が決まります．

それぞれの権限をサーバー内のメンバーに与えるには，**対応するDiscord上のロールをそのメンバーに付与します**．

## 権限の種類

Comiacapayには，以下の4種類の権限があります：

- READ（閲覧）：そのサーバーに紐づいた全ての設定と，イベントの売上を閲覧できます
- REGISTER（レジ）：そのサーバーに紐づいたイベントの売上を登録できます
- WRITE（設定）：そのサーバーに紐づいた全ての設定を変更できます
- ADMIN（管理）：どのロールを持っている人に以上3つの権限を付与するか設定できます

このうちADMIN以外の3つの権限はDiscord上のロールに対応し，そのロールが付与されているメンバーに与えられます．

ADMIN権限はDiscord上で管理者権限を持っているか（Botを導入できるか）に対応します．

## 権限の設定

新しくサーバーを登録したり，権限を設定するには，以下の手順を行います：

1.  Discord上で，権限に対応するロールを作成します．
1.  [サインイン](signin.md)します．
1.  トップ画面で「追加・設定変更」ボタンを押します．
    ![](root.jpg)
1.  DiscordでBotを追加する画面が表示されるので，追加・設定したいサーバーを選択して「認証」ボタンを押します．このとき表示されるサーバーは自分が管理者であるサーバーだけです．
    ![](discord-authorize.jpg)
1.  Comiacapayの画面に戻るので，サーバーの権限を設定します．
    ![](guilds-callback.jpg)
    - READ・REGISTER・WRITE権限を設定できます．
    - `@everyone`を選択し，そのサーバーの全てのメンバーに権限を与えることもできます．
    - ロールを選択しないこともできます．その場合，`@everyone`と同じく，そのサーバーの全てのメンバーに権限が与えられます．

なお，権限の設定を変更する際も，同じ手順を踏む必要があります．
