diff --git a/node_modules/@wyw-in-js/transform/lib/cache.js b/node_modules/@wyw-in-js/transform/lib/cache.js
index 0762ed7..4cfbd99 100644
--- a/node_modules/@wyw-in-js/transform/lib/cache.js
+++ b/node_modules/@wyw-in-js/transform/lib/cache.js
@@ -27,11 +27,19 @@ class TransformCacheCollection {
   add(cacheName, key, value) {
     const cache = this[cacheName];
     loggers[cacheName]('%s:add %s %f', (0, _getFileIdx.getFileIdx)(key), key, () => {
+      if (value === undefined) {
+        return cache.has(key) ? 'removed' : 'noop';
+      }
       if (!cache.has(key)) {
         return 'added';
       }
       return cache.get(key) === value ? 'unchanged' : 'updated';
     });
+    if (value === undefined) {
+      cache.delete(key);
+      this.contentHashes.delete(key);
+      return;
+    }
     cache.set(key, value);
     if ('initialCode' in value) {
       var _value$initialCode;
@@ -85,9 +93,13 @@ class TransformCacheCollection {
     if (fileEntrypoint) {
       for (const [, dependency] of fileEntrypoint.dependencies) {
         const dependencyFilename = dependency.resolved;
-        if (dependencyFilename) {
+        if (!dependencyFilename) continue;
+        if (_nodeFs.default.existsSync(dependencyFilename)) {
           const dependencyContent = _nodeFs.default.readFileSync(dependencyFilename, 'utf8');
           this.invalidateIfChanged(dependencyFilename, dependencyContent);
+        } else {
+          this.contentHashes.delete(dependencyFilename);
+          this.invalidateForFile(dependencyFilename);
         }
       }
     }
